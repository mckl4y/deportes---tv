<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amantes del futbOl | Deportes Gratis</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --dazn-black: #050505;
            --dazn-gray: #111111;
            --dazn-accent: #f8ff13; 
            --dazn-card: #1a1a1a;
        }

        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Roboto', sans-serif; background-color: var(--dazn-black); color: white; padding-top: 70px; }

        /* LOGO CON BAL√ìN PROFESIONAL */
        .logo-container { display: flex; align-items: center; font-family: 'Orbitron', sans-serif; font-size: 20px; font-weight: 900; letter-spacing: -1px; }
        .ball-o { 
            width: 18px; height: 18px; background: white; border-radius: 50%; 
            position: relative; margin-left: 1px; display: inline-block;
            background: radial-gradient(circle at 30% 30%, #fff, #999);
            box-shadow: inset 0 0 4px #000;
        }
        .ball-o::after { content: '‚öΩ'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 16px; }

        nav { 
            background: rgba(0,0,0,0.98); height: 70px; display: flex; align-items: center; 
            padding: 0 30px; position: fixed; top: 0; width: 100%; z-index: 1000; 
            border-bottom: 2px solid var(--dazn-accent); justify-content: space-between; 
        }
        .nav-links { display: flex; gap: 20px; font-size: 12px; font-weight: 900; text-transform: uppercase; }
        .nav-links span { cursor: pointer; padding: 26px 0; border-bottom: 3px solid transparent; transition: 0.2s; }
        .nav-links span.active { color: var(--dazn-accent); border-bottom: 3px solid var(--dazn-accent); }

        .container { padding: 20px; max-width: 1400px; margin: 0 auto; }
        .section-title { font-size: 20px; font-weight: 900; margin: 25px 0 15px; border-left: 4px solid var(--dazn-accent); padding-left: 12px; text-transform: uppercase; }

        /* GRID Y CARDS */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; }
        .card { background: var(--dazn-card); border-radius: 2px; overflow: hidden; transition: 0.3s; cursor: pointer; border: 1px solid #222; }
        .card:hover { border-color: var(--dazn-accent); transform: translateY(-3px); }
        .card-img-box { height: 140px; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .card-img-box img { max-width: 80%; max-height: 80%; object-fit: contain; }
        .card-body { padding: 12px; }
        
        /* MULTIENLACES */
        .link-select { 
            width: 100%; background: #000; color: #00ff00; border: 1px solid #333; 
            padding: 8px; font-weight: bold; font-size: 11px; margin-top: 10px; cursor: pointer;
        }

        /* PA√çSES */
        .country-block { margin-bottom: 30px; border-top: 1px solid #222; padding-top: 20px; }
        .country-label { font-size: 16px; font-weight: 900; margin-bottom: 15px; color: #888; }

        /* PLAYER SIN PUBLICIDAD */
        #player-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 4000; display: none; flex-direction: column; }
        .player-nav { padding: 15px; display: flex; justify-content: space-between; align-items: center; background: #0a0a0a; }
        iframe { flex-grow: 1; border: none; width: 100%; height: 100%; }

        .live-tag { color: #ff0000; font-size: 10px; font-weight: 900; animation: blink 1.5s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

<nav>
    <div class="logo-container">
        <span>amantes del futb</span><div class="ball-o"></div>
    </div>
    <div class="nav-links">
        <span id="tab-sports" class="active" onclick="setView('sports')">Eventos</span>
        <span id="tab-channels" onclick="setView('channels')">Canales</span>
        <span id="tab-schedule" onclick="setView('schedule')">Horarios</span>
    </div>
</nav>

<div class="container" id="main-view"></div>

<div id="player-modal">
    <div class="player-nav">
        <div id="playing-now" style="font-size: 12px; font-weight: 900;"></div>
        <button onclick="closePlayer()" style="background:var(--dazn-accent); border:none; padding:8px 15px; font-weight:900; cursor:pointer;">CERRAR X</button>
    </div>
    <iframe id="video-engine" sandbox="allow-scripts allow-same-origin allow-forms" allowfullscreen></iframe>
</div>

<script>
    const ENDPOINT_S = "https://api.cdn-live.tv/api/v1/events/sports/?user=cdnlivetv&plan=free";
    const ENDPOINT_C = "https://api.cdn-live.tv/api/v1/channels/?user=cdnlivetv&plan=free";

    const COUNTRY_NAMES = {
        "us": "Estados Unidos", "gb": "Reino Unido", "es": "Espa√±a", "fr": "Francia", "de": "Alemania",
        "it": "Italia", "pl": "Polonia", "au": "Australia", "pt": "Portugal", "br": "Brasil", "ca": "Canad√°",
        "mx": "M√©xico", "ar": "Argentina", "ru": "Rusia", "tr": "Turqu√≠a", "sa": "Arabia Saudita"
        // Se pueden a√±adir m√°s seg√∫n el listado
    };

    async function setView(type) {
        document.querySelectorAll('.nav-links span').forEach(s => s.classList.remove('active'));
        document.getElementById(`tab-${type}`).classList.add('active');
        const view = document.getElementById('main-view');
        view.innerHTML = "<p style='text-align:center;'>Cargando contenido gratuito...</p>";

        try {
            if (type === 'sports') {
                const res = await fetch(ENDPOINT_S);
                const data = await res.json();
                renderSports(data['cdn-live-tv']);
            } else if (type === 'channels') {
                const res = await fetch(ENDPOINT_C);
                const data = await res.json();
                renderChannels(data.channels);
            } else if (type === 'schedule') {
                const res = await fetch(ENDPOINT_S);
                const data = await res.json();
                renderSchedule(data['cdn-live-tv']);
            }
        } catch (e) { view.innerHTML = "Error al conectar con la API."; }
    }

    function renderSports(sports) {
        let html = '';
        ['Soccer', 'NBA', 'NFL', 'NHL'].forEach(cat => {
            if (sports[cat] && sports[cat].length > 0) {
                html += `<div class="section-title">${cat.replace('Soccer', 'F√∫tbol')}</div><div class="grid">`;
                sports[cat].forEach(ev => {
                    const isLive = ev.status === 'live';
                    let selectLinks = `<select class="link-select" onchange="if(this.value) openPlayer(this.value, '${ev.homeTeam} vs ${ev.awayTeam}')">`;
                    selectLinks += `<option value="">VER OPCIONES DE EMISI√ìN</option>`;
                    ev.channels.forEach(ch => {
                        selectLinks += `<option value="${ch.url}">${ch.channel_name} (${ch.viewers} v.)</option>`;
                    });
                    selectLinks += `</select>`;

                    html += `
                    <div class="card">
                        <div class="card-img-box">
                            <img src="${ev.homeTeamIMG}" onerror="this.src='https://via.placeholder.com/150x80/111/fff?text=LIVE'">
                        </div>
                        <div class="card-body">
                            <div class="live-tag">${isLive ? '‚óè EN VIVO' : ev.time}</div>
                            <div style="font-weight:900; font-size:14px; margin:5px 0;">${ev.homeTeam} vs ${ev.awayTeam}</div>
                            <div style="font-size:11px; color:#666;">${ev.tournament}</div>
                            ${selectLinks}
                        </div>
                    </div>`;
                });
                html += `</div>`;
            }
        });
        document.getElementById('main-view').innerHTML = html;
    }

    function renderChannels(channels) {
        const groups = {};
        channels.forEach(ch => {
            const country = COUNTRY_NAMES[ch.code] || ch.code.toUpperCase();
            if (!groups[country]) groups[country] = [];
            groups[country].push(ch);
        });

        let html = '<div class="section-title">Televisi√≥n por Pa√≠ses</div>';
        Object.keys(groups).sort().forEach(cName => {
            html += `
            <div class="country-block">
                <div class="country-label">üì∫ ${cName} (${groups[cName].length} canales)</div>
                <div class="grid">
                    ${groups[cName].map(ch => `
                        <div class="card" onclick="openPlayer('${ch.url}', '${ch.name}')">
                            <div class="card-img-box" style="height:100px; padding:15px;">
                                <img src="${ch.image}">
                            </div>
                            <div class="card-body" style="text-align:center;">
                                <div style="font-weight:900; font-size:12px;">${ch.name}</div>
                                <div style="font-size:9px; color:#00ff00;">ONLINE</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>`;
        });
        document.getElementById('main-view').innerHTML = html;
    }

    function renderSchedule(sports) {
        let events = [];
        ['Soccer', 'NBA', 'NFL', 'NHL'].forEach(cat => { if(sports[cat]) events = events.concat(sports[cat]); });
        events.sort((a,b) => a.time.localeCompare(b.time));

        let html = '<div class="section-title">Agenda del D√≠a</div>';
        events.forEach(ev => {
            html += `
            <div style="display:flex; justify-content:space-between; background:#111; padding:15px; margin-bottom:5px; align-items:center; border-radius:2px;">
                <div style="color:var(--dazn-accent); font-weight:900; width:70px;">${ev.time}</div>
                <div style="flex-grow:1; font-weight:bold; font-size:14px;">${ev.homeTeam} vs ${ev.awayTeam} <span style="font-size:10px; color:#555; display:block;">${ev.tournament}</span></div>
                <button onclick="setView('sports')" style="background:none; border:1px solid #333; color:white; padding:5px 10px; cursor:pointer; font-size:10px;">VER CANALES</button>
            </div>`;
        });
        document.getElementById('main-view').innerHTML = html;
    }

    function openPlayer(url, title) {
        document.getElementById('playing-now').innerText = title.toUpperCase();
        document.getElementById('video-engine').src = url;
        document.getElementById('player-modal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function closePlayer() {
        document.getElementById('player-modal').style.display = 'none';
        document.getElementById('video-engine').src = '';
        document.body.style.overflow = 'auto';
    }

    setView('sports');
</script>
</body>
</html>
